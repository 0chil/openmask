{"remainingRequest":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\src\\components\\Map.vue","mtime":1584009037604},{"path":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\node_modules\\vuetify-loader\\lib\\loader.js","mtime":1574476662000},{"path":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Park\\Desktop\\vuejs\\mask-finder\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBWdWVEYXVtTWFwIGZyb20gJ3Z1ZS1kYXVtLW1hcCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnTWFwJywKCiAgY29tcG9uZW50czp7CiAgICBWdWVEYXVtTWFwLAogIH0sCiAgCiAgcHJvcHM6IHsKICAgIGdldFN0b3Jlc0J5R2VvUGFyZW50OiB7dHlwZTogRnVuY3Rpb259CiAgfSwKCiAgZGF0YTogKCkgPT4gKHsKICAgIGFwcEtleTogJzZmNDI4NTQ3ZjhmZjI2NDAyZDJlZGU4ZGFhOGIyNDBjJywKICAgIGNlbnRlcjoge2xhdDozMy40NTA3MDEsIGxuZzoxMjYuNTcwNjY3fSwKICAgIGxldmVsOiA0LCAKICAgIG1hcFR5cGVJZDogVnVlRGF1bU1hcC5NYXBUeXBlSWQuTk9STUFMLCAKICAgIGxpYnJhcmllczogW10sCiAgICBtYXA6IG51bGwsCiAgICBjZW50ZXJNYXJrZXI6bnVsbCwKICAgIGNlbnRlckNpcmNsZTpudWxsLAogICAgbWFya2VyQXJyYXk6W10sCgogICAgbG9jYXRpb246bnVsbCwKICAgIGdldHRpbmdMb2NhdGlvbjogZmFsc2UsCiAgICBlcnJvclN0cjpudWxsLAogIH0pLAoKICBtZXRob2RzOiB7CiAgICBnZXRTdG9yZXNCeUdlbyhhLGIpewogICAgICB0aGlzLmdldFN0b3Jlc0J5R2VvUGFyZW50KGEsYik7CiAgICB9LAogICAgLy8g7KeA64+E6rCAIOuhnOuTnCDsmYTro4zrkJjrqbQgbG9hZCDsnbTrsqTtirgg67Cc7IOdCiAgICBvbkxvYWQgKG1hcCkgewogICAgICB0aGlzLm1hcCA9IG1hcDsKICAgICAgaWYodGhpcy5sb2NhdGlvbil7CiAgICAgICAgdGhpcy5zZXRDZW50ZXIoKTsKICAgICAgfQogICAgICB2YXIgcmVmPXRoaXM7CiAgICAgIHZhciBzdGFydExhdCxzdGFydExuZyxzdGFydExldmVsOwogICAgICBrYWthby5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ2RyYWdlbmQnLCBmdW5jdGlvbigpIHsKICAgICAgICByZWYuZ2V0U3RvcmVzQnlHZW8obWFwLmdldENlbnRlcigpLmdldExhdCgpLG1hcC5nZXRDZW50ZXIoKS5nZXRMbmcoKSk7CiAgICAgIH0pOwogICAgICBrYWthby5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3pvb21fc3RhcnQnLCBmdW5jdGlvbigpIHsKICAgICAgICBzdGFydExhdD1tYXAuZ2V0Q2VudGVyKCkuZ2V0TGF0KCk7CiAgICAgICAgc3RhcnRMbmc9bWFwLmdldENlbnRlcigpLmdldExuZygpOwogICAgICAgIHN0YXJ0TGV2ZWw9bWFwLmdldExldmVsKCk7CiAgICAgIH0pOwogICAgICBrYWthby5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcCwgJ3pvb21fY2hhbmdlZCcsIGZ1bmN0aW9uKCkgewogICAgICAgIGlmKG1hcC5nZXRMZXZlbCgpPnN0YXJ0TGV2ZWwpCiAgICAgICAgICBtYXAuc2V0Q2VudGVyKG5ldyBrYWthby5tYXBzLkxhdExuZyhzdGFydExhdCxzdGFydExuZykpOwogICAgICAgIHJlZi5nZXRTdG9yZXNCeUdlbyhtYXAuZ2V0Q2VudGVyKCkuZ2V0TGF0KCksbWFwLmdldENlbnRlcigpLmdldExuZygpKTsKICAgICAgfSk7CiAgICB9LAoKICAgIHNldENlbnRlcjogZnVuY3Rpb24oKXsKICAgICAgaWYodGhpcy5jZW50ZXJNYXJrZXIpIHRoaXMuY2VudGVyTWFya2VyLnNldE1hcChudWxsKTsKICAgICAgdGhpcy5tYXAuc2V0TGV2ZWwoNCk7CiAgICAgIHRoaXMubWFwLnNldENlbnRlcihuZXcga2FrYW8ubWFwcy5MYXRMbmcodGhpcy5sb2NhdGlvbi5jb29yZHMubGF0aXR1ZGUsdGhpcy5sb2NhdGlvbi5jb29yZHMubG9uZ2l0dWRlKSk7CiAgICAgIHZhciBpbWFnZVNyYyA9IHJlcXVpcmUoJ0AvYXNzZXRzL3BlcnNvbl9waW5fMjRweF9yZWQuc3ZnJyksICAKICAgICAgICAgIGltYWdlU2l6ZSA9IG5ldyBrYWthby5tYXBzLlNpemUoMzYsIDM2KTsKICAgICAgdmFyIG1hcmtlckltYWdlID0gbmV3IGtha2FvLm1hcHMuTWFya2VySW1hZ2UoaW1hZ2VTcmMsaW1hZ2VTaXplLHt9KTsKICAgICAgdGhpcy5jZW50ZXJNYXJrZXIgPSBuZXcga2FrYW8ubWFwcy5NYXJrZXIoeyAKICAgICAgICBwb3NpdGlvbjogdGhpcy5tYXAuZ2V0Q2VudGVyKCksCiAgICAgICAgaW1hZ2U6IG1hcmtlckltYWdlCiAgICAgIH0pOwogICAgICB0aGlzLmNlbnRlck1hcmtlci5zZXRNYXAodGhpcy5tYXApOwogICAgICB0aGlzLmdldFN0b3Jlc0J5R2VvKHRoaXMubWFwLmdldENlbnRlcigpLmdldExhdCgpLHRoaXMubWFwLmdldENlbnRlcigpLmdldExuZygpKTsKICAgIH0sCgogICAgTGV2ZWwyUmFuZ2U6IGZ1bmN0aW9uKGxldmVsKXsKICAgICAgICBpZihsZXZlbDw1KQogICAgICAgICAgcmV0dXJuIDE1MDA7CiAgICAgICAgZWxzZSBpZihsZXZlbDw4KQogICAgICAgICAgcmV0dXJuIDI1MDA7CiAgICAgICAgZWxzZSBpZihsZXZlbDwxMCkKICAgICAgICAgIHJldHVybiAzNTAwOwogICAgICAgIGVsc2UgcmV0dXJuIDUwMDA7CiAgICB9LAoKICAgIAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZighKCJnZW9sb2NhdGlvbiIgaW4gbmF2aWdhdG9yKSkgewogICAgICB0aGlzLmVycm9yU3RyID0gJ0dlb2xvY2F0aW9uIGlzIG5vdCBhdmFpbGFibGUuJzsKICAgICAgYWxlcnQodGhpcy5lcnJvclN0cik7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0aGlzLmdldHRpbmdMb2NhdGlvbiA9IHRydWU7CiAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKHBvcyA9PiB7CiAgICAgIHRoaXMuZ2V0dGluZ0xvY2F0aW9uID0gZmFsc2U7CiAgICAgIHRoaXMubG9jYXRpb24gPSBwb3M7CiAgICAgIGlmKHRoaXMubWFwKSB7dGhpcy5zZXRDZW50ZXIoKTt9CiAgICB9LCBlcnIgPT4gewogICAgICB0aGlzLmdldHRpbmdMb2NhdGlvbiA9IGZhbHNlOwogICAgICB0aGlzLmVycm9yU3RyID0gZXJyLm1lc3NhZ2U7CiAgICB9KQogIH0sCgp9Cg=="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <vue-daum-map\n    :appKey=\"appKey\"\n    :center.sync=\"center\"\n    :level.sync=\"level\"\n    :mapTypeId=\"mapTypeId\"\n    :libraries=\"libraries\"\n    @load=\"onLoad\"\n    style=\"width:100%;height:100%\"/>\n    <!-- <v-btn @click=\"getStoresByGeo_Center\" elevation=\"10\" style=\"position:absolute;top:0;z-index:999;\">aa</v-btn> -->\n  </div>\n</template>\n\n<script type=\"text/javascript\" src=\"//dapi.kakao.com/v2/maps/sdk.js?appkey=6f428547f8ff26402d2ede8daa8b240c\"></script>\n\n<script>\n  import VueDaumMap from 'vue-daum-map';\n  export default {\n    name: 'Map',\n\n    components:{\n      VueDaumMap,\n    },\n    \n    props: {\n      getStoresByGeoParent: {type: Function}\n    },\n\n    data: () => ({\n      appKey: '6f428547f8ff26402d2ede8daa8b240c',\n      center: {lat:33.450701, lng:126.570667},\n      level: 4, \n      mapTypeId: VueDaumMap.MapTypeId.NORMAL, \n      libraries: [],\n      map: null,\n      centerMarker:null,\n      centerCircle:null,\n      markerArray:[],\n\n      location:null,\n      gettingLocation: false,\n      errorStr:null,\n    }),\n\n    methods: {\n      getStoresByGeo(a,b){\n        this.getStoresByGeoParent(a,b);\n      },\n      // 지도가 로드 완료되면 load 이벤트 발생\n      onLoad (map) {\n        this.map = map;\n        if(this.location){\n          this.setCenter();\n        }\n        var ref=this;\n        var startLat,startLng,startLevel;\n        kakao.maps.event.addListener(map, 'dragend', function() {\n          ref.getStoresByGeo(map.getCenter().getLat(),map.getCenter().getLng());\n        });\n        kakao.maps.event.addListener(map, 'zoom_start', function() {\n          startLat=map.getCenter().getLat();\n          startLng=map.getCenter().getLng();\n          startLevel=map.getLevel();\n        });\n        kakao.maps.event.addListener(map, 'zoom_changed', function() {\n          if(map.getLevel()>startLevel)\n            map.setCenter(new kakao.maps.LatLng(startLat,startLng));\n          ref.getStoresByGeo(map.getCenter().getLat(),map.getCenter().getLng());\n        });\n      },\n\n      setCenter: function(){\n        if(this.centerMarker) this.centerMarker.setMap(null);\n        this.map.setLevel(4);\n        this.map.setCenter(new kakao.maps.LatLng(this.location.coords.latitude,this.location.coords.longitude));\n        var imageSrc = require('@/assets/person_pin_24px_red.svg'),  \n            imageSize = new kakao.maps.Size(36, 36);\n        var markerImage = new kakao.maps.MarkerImage(imageSrc,imageSize,{});\n        this.centerMarker = new kakao.maps.Marker({ \n          position: this.map.getCenter(),\n          image: markerImage\n        });\n        this.centerMarker.setMap(this.map);\n        this.getStoresByGeo(this.map.getCenter().getLat(),this.map.getCenter().getLng());\n      },\n\n      Level2Range: function(level){\n          if(level<5)\n            return 1500;\n          else if(level<8)\n            return 2500;\n          else if(level<10)\n            return 3500;\n          else return 5000;\n      },\n\n      \n    },\n\n    created() {\n      if(!(\"geolocation\" in navigator)) {\n        this.errorStr = 'Geolocation is not available.';\n        alert(this.errorStr);\n        return;\n      }\n\n      this.gettingLocation = true;\n      navigator.geolocation.getCurrentPosition(pos => {\n        this.gettingLocation = false;\n        this.location = pos;\n        if(this.map) {this.setCenter();}\n      }, err => {\n        this.gettingLocation = false;\n        this.errorStr = err.message;\n      })\n    },\n\n  }\n</script>\n"]}]}